name: Build and Dockerize.NET API

on:
  push:
branches: [main]
pull_request:
jobs:
build:
runs - on: ubuntu - latest

    steps:
-name: Checkout code
      uses: actions / checkout@v3
- name: Setup.NET
      uses: actions / setup - dotnet@v3
      with:
        dotnet - version: '8.0.x'

    - name: Restore packages
      run: dotnet restore

    - name: Build project
      run: dotnet build --no-restore

    - name: Run tests
      run: dotnet test --no-build --verbosity normal

    - name: Set up Docker Buildx
      uses: docker / setup - buildx - action@v3

    - name: Login to Docker Hub
      uses: docker / login - action@v3
      with:
        username: ${ { ehtisham370 } }
password: ${ { secrets.DOCKERHUB_TOKEN } }

-name: Build and push Docker image
      uses: docker / build - push - action@v5
      with:
        context: .
        file: ./ Dockerfile
        push: true
        tags: yourdockerhubusername / webapiimage:latest
